<!-- Compound Interest Calculator Page -->
<!-- This combines the base calculator template with the Compound Interest calculator component -->

<div class="max-w-4xl mt-6 mx-auto">
    <!-- Back Button -->
    <div class="mb-8">
        <button 
            hx-get="/fragments/home.html"
            hx-target="#content-body"
            hx-swap="innerHTML"
            class="group inline-flex items-center px-4 py-2.5 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/50 hover:border-slate-600/50 rounded-lg text-sm font-medium text-gray-300 hover:text-white transition-all duration-200 shadow-sm hover:shadow-md">
            <svg class="w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            <span>Back to Calculators</span>
        </button>
    </div>

    <!-- Calculator Header -->
    <div class="mb-8">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl mb-4">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
            </svg>
        </div>
        <h1 class="text-4xl font-bold mb-3">Compound Interest Calculator</h1>
        <p class="text-gray-400 text-lg">Calculate how your investment grows over time with compound interest</p>
    </div>

    <!-- Calculator Content Area -->
    <div class="bg-slate-800/50 rounded-2xl p-6 md:p-8 border border-slate-700/50 backdrop-blur-sm">
        <!-- Compound Interest Form -->
        <form id="interest-form" class="space-y-6" onsubmit="calculateInterest(event)">
            <!-- Principal Amount -->
            <div>
                <label for="principal" class="block text-sm font-medium text-gray-300 mb-2">
                    Principal Amount (Initial Investment)
                </label>
                <div class="relative">
                    <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">$</span>
                    <input 
                        type="number" 
                        id="principal" 
                        name="principal"
                        step="0.01"
                        min="0"
                        placeholder="10000"
                        class="w-full pl-8 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                <p class="text-xs text-gray-500 mt-1">Enter the initial amount you're investing</p>
            </div>

            <!-- Interest Rate -->
            <div>
                <label for="rate" class="block text-sm font-medium text-gray-300 mb-2">
                    Annual Interest Rate (%)
                </label>
                <div class="relative">
                    <input 
                        type="number" 
                        id="rate" 
                        name="rate"
                        step="0.01"
                        min="0"
                        max="100"
                        placeholder="5.0"
                        class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400">%</span>
                </div>
                <p class="text-xs text-gray-500 mt-1">Enter the annual interest rate as a percentage</p>
            </div>

            <!-- Time Period -->
            <div>
                <label for="time" class="block text-sm font-medium text-gray-300 mb-2">
                    Time Period
                </label>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <input 
                            type="number" 
                            id="time" 
                            name="time"
                            step="1"
                            min="1"
                            placeholder="10"
                            class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">Number</p>
                    </div>
                    <div>
                        <select 
                            id="time-unit"
                            name="time-unit"
                            class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="years">Years</option>
                            <option value="months">Months</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">Unit</p>
                    </div>
                </div>
            </div>

            <!-- Compounding Frequency -->
            <div>
                <label for="compounding" class="block text-sm font-medium text-gray-300 mb-2">
                    Compounding Frequency
                </label>
                <select 
                    id="compounding"
                    name="compounding"
                    class="w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    <option value="1">Annually (1 time per year)</option>
                    <option value="2">Semi-annually (2 times per year)</option>
                    <option value="4" selected>Quarterly (4 times per year)</option>
                    <option value="12">Monthly (12 times per year)</option>
                    <option value="52">Weekly (52 times per year)</option>
                    <option value="365">Daily (365 times per year)</option>
                </select>
                <p class="text-xs text-gray-500 mt-1">How often interest is compounded</p>
            </div>

            <!-- Calculate Button -->
            <button 
                type="submit"
                class="w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg font-semibold text-white hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl">
                Calculate Compound Interest
            </button>
        </form>

        <!-- Result Display -->
        <div id="interest-result" class="hidden mt-8">
            <div class="bg-gradient-to-br from-slate-700/50 to-slate-800/50 rounded-xl p-6 border border-slate-600/50">
                <div class="space-y-4">
                    <!-- Final Amount -->
                    <div class="flex justify-between items-center pb-4 border-b border-slate-600/50">
                        <div>
                            <p class="text-sm text-gray-400 mb-1">Final Amount</p>
                            <p class="text-3xl font-bold text-indigo-400" id="final-amount"></p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm text-gray-400 mb-1">Interest Earned</p>
                            <p class="text-xl font-semibold text-green-400" id="interest-earned"></p>
                        </div>
                    </div>

                    <!-- Breakdown -->
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Principal Amount</span>
                            <span class="text-lg font-semibold text-gray-200" id="principal-display"></span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Total Interest</span>
                            <span class="text-lg font-semibold text-green-400" id="total-interest-display"></span>
                        </div>
                        <div class="flex justify-between items-center pt-3 border-t border-slate-600/50">
                            <span class="text-gray-300 font-medium">Total Return</span>
                            <span class="text-2xl font-bold text-white" id="total-return"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Growth Graph -->
            <div class="mt-6 bg-slate-900/30 rounded-xl p-6 border border-slate-700/50">
                <h4 class="text-lg font-semibold mb-4 text-gray-200">Growth Over Time</h4>
                <div id="growth-chart" class="w-full h-64">
                    <!-- SVG chart will be inserted here -->
                </div>
            </div>
            
            <!-- Calculation Formula -->
            <div class="mt-4 bg-slate-900/30 rounded-lg p-4 border border-slate-700/50">
                <p class="text-xs text-gray-400 mb-2">Calculation Formula</p>
                <p class="text-sm font-mono text-gray-300" id="calculation-formula"></p>
            </div>
        </div>
    </div>

    <!-- Formula Info Section -->
    <div class="mt-8">
        <div class="bg-slate-800/30 rounded-xl p-6 border border-slate-700/50">
            <h3 class="text-xl font-bold mb-4 flex items-center">
                <svg class="w-6 h-6 mr-2 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                About Compound Interest
            </h3>
            <div class="space-y-4 text-gray-300">
                <p>
                    Compound interest is interest calculated on the initial principal and also on the accumulated interest 
                    of previous periods. This means your investment grows exponentially over time.
                </p>
                
                <div class="bg-slate-900/50 rounded-lg p-4 font-mono text-center space-y-2">
                    <p class="text-lg">A = P(1 + r/n)<sup>nt</sup></p>
                    <div class="text-sm text-gray-400 space-y-1 mt-3">
                        <p>A = Final Amount</p>
                        <p>P = Principal (Initial Investment)</p>
                        <p>r = Annual Interest Rate (as decimal)</p>
                        <p>n = Compounding Frequency per year</p>
                        <p>t = Time Period in years</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="bg-slate-700/30 rounded-lg p-4 border border-slate-600/30">
                        <p class="text-sm font-semibold text-indigo-400 mb-2">Key Benefits</p>
                        <ul class="text-xs text-gray-400 space-y-1">
                            <li>• Earnings grow faster than simple interest</li>
                            <li>• More frequent compounding = higher returns</li>
                            <li>• Time is your greatest asset</li>
                            <li>• Start early for maximum benefit</li>
                        </ul>
                    </div>
                    <div class="bg-slate-700/30 rounded-lg p-4 border border-slate-600/30">
                        <p class="text-sm font-semibold text-indigo-400 mb-2">Compounding Frequency</p>
                        <ul class="text-xs text-gray-400 space-y-1">
                            <li>• Daily: Interest calculated every day</li>
                            <li>• Monthly: Interest calculated 12 times/year</li>
                            <li>• Quarterly: Interest calculated 4 times/year</li>
                            <li>• Annually: Interest calculated once per year</li>
                        </ul>
                    </div>
                </div>
                
                <p class="text-sm text-gray-400 mt-4">
                    <strong class="text-gray-300">Note:</strong> This calculator assumes a fixed interest rate. In reality, 
                    interest rates may fluctuate. Always consult with a financial advisor for investment advice.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for Compound Interest Calculation -->
<script>
    function calculateInterest(event) {
        event.preventDefault();
        
        // Get inputs
        const principal = parseFloat(document.getElementById('principal').value);
        const ratePercent = parseFloat(document.getElementById('rate').value);
        let time = parseFloat(document.getElementById('time').value);
        const timeUnit = document.getElementById('time-unit').value;
        const compounding = parseFloat(document.getElementById('compounding').value);
        
        if (!principal || principal <= 0) {
            alert('Please enter a valid principal amount');
            return;
        }
        
        if (!ratePercent || ratePercent <= 0) {
            alert('Please enter a valid interest rate');
            return;
        }
        
        if (!time || time <= 0) {
            alert('Please enter a valid time period');
            return;
        }
        
        // Convert time to years if needed
        if (timeUnit === 'months') {
            time = time / 12;
        }
        
        // Convert rate to decimal
        const rate = ratePercent / 100;
        
        // Calculate compound interest: A = P(1 + r/n)^(nt)
        const finalAmount = principal * Math.pow(1 + rate / compounding, compounding * time);
        const interestEarned = finalAmount - principal;
        const totalReturn = finalAmount;
        
        // Build formula
        const formula = `A = P(1 + r/n)^(nt) = $${principal.toFixed(2)}(1 + ${rate.toFixed(4)}/${compounding})^(${compounding} × ${time.toFixed(2)}) = $${finalAmount.toFixed(2)}`;
        
        // Display results
        document.getElementById('final-amount').textContent = '$' + finalAmount.toFixed(2);
        document.getElementById('interest-earned').textContent = '$' + interestEarned.toFixed(2);
        document.getElementById('principal-display').textContent = '$' + principal.toFixed(2);
        document.getElementById('total-interest-display').textContent = '$' + interestEarned.toFixed(2);
        document.getElementById('total-return').textContent = '$' + totalReturn.toFixed(2);
        document.getElementById('calculation-formula').textContent = formula;
        
        // Draw growth chart
        drawGrowthChart(principal, rate, compounding, time, finalAmount);
        
        // Show result
        document.getElementById('interest-result').classList.remove('hidden');
        document.getElementById('interest-result').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
    
    function drawGrowthChart(principal, rate, compounding, years, finalAmount) {
        const chartContainer = document.getElementById('growth-chart');
        const width = chartContainer.clientWidth || 600;
        const height = 256;
        const padding = 40;
        const chartWidth = width - (padding * 2);
        const chartHeight = height - (padding * 2);
        
        // Generate data points for each year
        const dataPoints = [];
        const maxYears = Math.ceil(years);
        for (let t = 0; t <= maxYears; t++) {
            const amount = principal * Math.pow(1 + rate / compounding, compounding * t);
            dataPoints.push({ year: t, amount: amount });
        }
        
        // Find max value for scaling
        const maxAmount = Math.max(...dataPoints.map(d => d.amount));
        const minAmount = principal;
        
        // Create SVG
        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('width', width);
        svg.setAttribute('height', height);
        svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
        
        // Draw grid lines
        for (let i = 0; i <= 5; i++) {
            const y = padding + (chartHeight / 5) * i;
            const value = minAmount + ((maxAmount - minAmount) / 5) * (5 - i);
            
            // Horizontal grid line
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', padding);
            line.setAttribute('y1', y);
            line.setAttribute('x2', width - padding);
            line.setAttribute('y2', y);
            line.setAttribute('stroke', '#334155');
            line.setAttribute('stroke-width', '1');
            line.setAttribute('stroke-dasharray', '2,2');
            svg.appendChild(line);
            
            // Y-axis label
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', padding - 10);
            text.setAttribute('y', y + 4);
            text.setAttribute('fill', '#94a3b8');
            text.setAttribute('font-size', '10');
            text.setAttribute('text-anchor', 'end');
            text.textContent = '$' + (value / 1000 >= 1 ? (value / 1000).toFixed(1) + 'k' : value.toFixed(0));
            svg.appendChild(text);
        }
        
        // Draw vertical grid lines (years)
        for (let i = 0; i <= maxYears; i++) {
            const x = padding + (chartWidth / maxYears) * i;
            
            // Vertical grid line
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', x);
            line.setAttribute('y1', padding);
            line.setAttribute('x2', x);
            line.setAttribute('y2', height - padding);
            line.setAttribute('stroke', '#334155');
            line.setAttribute('stroke-width', '1');
            line.setAttribute('stroke-dasharray', '2,2');
            svg.appendChild(line);
            
            // X-axis label
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', x);
            text.setAttribute('y', height - padding + 20);
            text.setAttribute('fill', '#94a3b8');
            text.setAttribute('font-size', '10');
            text.setAttribute('text-anchor', 'middle');
            text.textContent = i;
            svg.appendChild(text);
        }
        
        // Draw growth line
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        let pathData = '';
        dataPoints.forEach((point, index) => {
            const x = padding + (chartWidth / maxYears) * point.year;
            const y = height - padding - ((point.amount - minAmount) / (maxAmount - minAmount)) * chartHeight;
            pathData += (index === 0 ? 'M' : 'L') + ` ${x} ${y}`;
        });
        path.setAttribute('d', pathData);
        path.setAttribute('fill', 'none');
        path.setAttribute('stroke', '#818cf8');
        path.setAttribute('stroke-width', '3');
        path.setAttribute('stroke-linecap', 'round');
        path.setAttribute('stroke-linejoin', 'round');
        svg.appendChild(path);
        
        // Draw area under curve (gradient fill)
        const areaPath = pathData + ` L ${width - padding} ${height - padding} L ${padding} ${height - padding} Z`;
        const area = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        area.setAttribute('d', areaPath);
        area.setAttribute('fill', 'url(#gradient)');
        area.setAttribute('opacity', '0.3');
        svg.insertBefore(area, path);
        
        // Define gradient
        const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
        const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
        gradient.setAttribute('id', 'gradient');
        gradient.setAttribute('x1', '0%');
        gradient.setAttribute('y1', '0%');
        gradient.setAttribute('x2', '0%');
        gradient.setAttribute('y2', '100%');
        const stop1 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
        stop1.setAttribute('offset', '0%');
        stop1.setAttribute('stop-color', '#818cf8');
        stop1.setAttribute('stop-opacity', '0.4');
        const stop2 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
        stop2.setAttribute('offset', '100%');
        stop2.setAttribute('stop-color', '#818cf8');
        stop2.setAttribute('stop-opacity', '0');
        gradient.appendChild(stop1);
        gradient.appendChild(stop2);
        defs.appendChild(gradient);
        svg.insertBefore(defs, svg.firstChild);
        
        // Draw data points
        dataPoints.forEach((point) => {
            const x = padding + (chartWidth / maxYears) * point.year;
            const y = height - padding - ((point.amount - minAmount) / (maxAmount - minAmount)) * chartHeight;
            
            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.setAttribute('cx', x);
            circle.setAttribute('cy', y);
            circle.setAttribute('r', '4');
            circle.setAttribute('fill', '#818cf8');
            circle.setAttribute('stroke', '#1e293b');
            circle.setAttribute('stroke-width', '2');
            svg.appendChild(circle);
        });
        
        // Draw axes
        // X-axis
        const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        xAxis.setAttribute('x1', padding);
        xAxis.setAttribute('y1', height - padding);
        xAxis.setAttribute('x2', width - padding);
        xAxis.setAttribute('y2', height - padding);
        xAxis.setAttribute('stroke', '#64748b');
        xAxis.setAttribute('stroke-width', '2');
        svg.insertBefore(xAxis, defs.nextSibling);
        
        // Y-axis
        const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        yAxis.setAttribute('x1', padding);
        yAxis.setAttribute('y1', padding);
        yAxis.setAttribute('x2', padding);
        yAxis.setAttribute('y2', height - padding);
        yAxis.setAttribute('stroke', '#64748b');
        yAxis.setAttribute('stroke-width', '2');
        svg.insertBefore(yAxis, defs.nextSibling);
        
        // Axis labels
        const xLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        xLabel.setAttribute('x', width / 2);
        xLabel.setAttribute('y', height - 5);
        xLabel.setAttribute('fill', '#94a3b8');
        xLabel.setAttribute('font-size', '12');
        xLabel.setAttribute('text-anchor', 'middle');
        xLabel.textContent = 'Years';
        svg.appendChild(xLabel);
        
        const yLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        yLabel.setAttribute('x', 15);
        yLabel.setAttribute('y', height / 2);
        yLabel.setAttribute('fill', '#94a3b8');
        yLabel.setAttribute('font-size', '12');
        yLabel.setAttribute('text-anchor', 'middle');
        yLabel.setAttribute('transform', `rotate(-90, 15, ${height / 2})`);
        yLabel.textContent = 'Amount ($)';
        svg.appendChild(yLabel);
        
        // Clear and add SVG
        chartContainer.innerHTML = '';
        chartContainer.appendChild(svg);
    }
</script>

